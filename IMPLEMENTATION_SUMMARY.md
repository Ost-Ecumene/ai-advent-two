# –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π AI

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç—Ä–∏ –º–æ–¥–µ–ª–∏ —Ä–∞–∑–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏

–í `ChatConfig.kt`:
- **BUDGET**: `meta-llama/llama-3.2-3b-instruct:free` - –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å
- **MEDIUM**: `openai/gpt-4o-mini` - —Å—Ä–µ–¥–Ω—è—è –ø–æ —Ü–µ–Ω–µ ($0.15/$0.60 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤)
- **ADVANCED**: `anthropic/claude-3.5-sonnet` - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è ($3.0/$15.0 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤)

### 2. –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏

–°–æ–∑–¥–∞–Ω `ModelPricing` –æ–±—ä–µ–∫—Ç —Å:
- –¶–µ–Ω–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
- –§—É–Ω–∫—Ü–∏–µ–π —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–∫–µ–Ω–æ–≤

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

–°–æ–∑–¥–∞–Ω `MessageMetrics.kt`:
- –ú–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (–º—Å)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ (prompt, completion, total)
- –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
- –§—É–Ω–∫—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è UI

### 4. –û–±–Ω–æ–≤–ª—ë–Ω API —Å–ª–æ–π

–í `ChatResponseDto.kt` –¥–æ–±–∞–≤–ª–µ–Ω–æ:
- `UsageDto` - –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–∫–µ–Ω–∞—Ö –∏–∑ OpenRouter API
- –ü–æ–ª–µ `model` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏

### 5. –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–º–µ—Ä—ã –≤—Ä–µ–º–µ–Ω–∏

–í `ChatRepositoryImpl.kt`:
- –ó–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (`System.currentTimeMillis()`)
- –†–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–∞ API
- –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

- `ChatRepository` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `model`
- `ChatItem.Message` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ `metrics`
- `ChatViewModel` —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª—å—é

### 7. –°–æ–∑–¥–∞–Ω UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏

–í `ChatScreen.kt`:
- –¢—Ä–∏ –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ –≤ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞
- –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ" –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
- –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 8. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

–í `MessagesList.kt`:
- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø–æ–¥ –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –≤—Ä–µ–º–µ–Ω–∏, —Ç–æ–∫–µ–Ω–æ–≤, —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- Emoji-–∏–∫–æ–Ω–∫–∏ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```
UI Layer (ChatScreen)
    ‚Üì [–≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏]
ViewModel (ChatViewModel)
    ‚Üì [–ø–µ—Ä–µ–¥–∞—á–∞ –º–æ–¥–µ–ª–∏]
Repository (ChatRepositoryImpl)
    ‚Üì [–∑–∞–ø—Ä–æ—Å + –∑–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏]
Network (OpenRouterService)
    ‚Üì [API –æ—Ç–≤–µ—Ç —Å —Ç–æ–∫–µ–Ω–∞–º–∏]
Repository (—Ä–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫)
    ‚Üì [—Å–æ–∑–¥–∞–Ω–∏–µ MessageMetrics]
UI Layer (MessagesList)
    ‚Üì [–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫]
```

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `feature/chat/src/main/java/com/povush/chat/ChatConfig.kt` ‚úèÔ∏è
2. `feature/chat/src/main/java/com/povush/chat/network/dto/ChatResponseDto.kt` ‚úèÔ∏è
3. `feature/chat/src/main/java/com/povush/chat/model/MessageMetrics.kt` ‚ú® NEW
4. `feature/chat/src/main/java/com/povush/chat/model/ChatItem.kt` ‚úèÔ∏è
5. `feature/chat/src/main/java/com/povush/chat/repository/ChatRepository.kt` ‚úèÔ∏è
6. `feature/chat/src/main/java/com/povush/chat/repository/impl/ChatRepositoryImpl.kt` ‚úèÔ∏è
7. `feature/chat/src/main/java/com/povush/chat/ui/ChatViewModel.kt` ‚úèÔ∏è
8. `feature/chat/src/main/java/com/povush/chat/ui/ChatScreen.kt` ‚úèÔ∏è
9. `feature/chat/src/main/java/com/povush/chat/ui/components/MessagesList.kt` ‚úèÔ∏è

### –°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏

‚úÖ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–ª—Å—è: `BUILD SUCCESSFUL in 34s`
‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
‚ö†Ô∏è –û–¥–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. **–û—Ç–∫—Ä–æ–π—Ç–µ —ç–∫—Ä–∞–Ω —á–∞—Ç–∞**
3. **–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å** - –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –æ–¥–Ω—É –∏–∑ —Ç—Ä—ë—Ö –∫–Ω–æ–ø–æ–∫ –≤–Ω–∏–∑—É
4. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å** - –Ω–∞–ø—Ä–∏–º–µ—Ä: "–û–±—ä—è—Å–Ω–∏ –∫–≤–∞–Ω—Ç–æ–≤—É—é –∑–∞–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å"
5. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏** - –ø–æ–¥ –æ—Ç–≤–µ—Ç–æ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
6. **–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ** —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

## üìù –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:

1. ‚úÖ –í—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É —Ç—Ä–µ–º—è –º–æ–¥–µ–ª—è–º–∏ —Ä–∞–∑–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏
2. ‚úÖ –í–∏–¥–µ—Ç—å –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
3. ‚úÖ –í–∏–¥–µ—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
4. ‚úÖ –í–∏–¥–µ—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
5. ‚úÖ –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –≤–∏–∑—É–∞–ª—å–Ω–æ

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –æ–¥–∏–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
3. –ó–∞–¥–∞–π—Ç–µ –µ–≥–æ –≤—Å–µ–º —Ç—Ä—ë–º –º–æ–¥–µ–ª—è–º
4. –ó–∞–ø–∏—à–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. –°–¥–µ–ª–∞–π—Ç–µ –≤—ã–≤–æ–¥—ã –æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–ï—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

- **–≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫**: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ –≤ CSV
- **–ò—Å—Ç–æ—Ä–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π**: –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **–ì—Ä–∞—Ñ–∏–∫–∏**: –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è/—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
- **–ë–∞—Ç—á-—Ç–µ—Å—Ç—ã**: –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å—Ä–∞–∑—É –≤—Å–µ–º –º–æ–¥–µ–ª—è–º
- **–î—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –≤ `ChatConfig`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

API –∫–ª—é—á —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `local.properties`:
```
OPENROUTER_API_KEY=sk-or-v1-...
```

–ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–º–µ–Ω–∏—Ç—å –∫–ª—é—á - –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É.

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é –º–æ–¥–µ–ª–µ–π!

